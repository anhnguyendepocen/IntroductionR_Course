---
title: "WPA #1 -- Creating and using vectors"
output:
  prettydoc::html_pretty:
    theme: lumen
    highlight: github
---


```{r global_options, include=FALSE}
knitr::opts_chunk$set(fig.width=12, fig.height=8,
                      echo=TRUE, warning=FALSE, message=FALSE)
```

Open RStudio. Open a new R script (File -- New File -- R Script), and save it as `wpaXLastFirst.R` (where X is the WPA number, and Last and First is your last and first name). At the top of your script, write the assignment number, your name and date in comments. When you answer a task, indicate which task you are answering with appopriate comments.

*Here is an example of how your `wpaXLastFirst.R` file could look*
```{r, eval = F}
# Assignment: WPA X
# Name: LAST, FIRST
# Date: DAY MONTH YEAR


# TASK 1
1 + 1

# TASK 2
2 + 2

# ...
```



# Does drinking non-alcoholic beer affect cognitive performance?

<img src="http://i.telegraph.co.uk/multimedia/archive/02326/obama_2326627b.jpg" width="400" />

A psychologist has a theory that some of the negative cognitive effects of alcohol are the result of psychological rather than physiological processes. To test this, she has 12 participants perform a cognitive test before and after drinking non-alcoholic beer which was labelled to contain 5\% alcohol. Results from the study, including some demographic data, are presented in the following table. Note that higher scores on the test indicate better performance.

participant | before  | after | age | sex | eye.color
----| ------ | ------- | ---- | ---- | ----
1 | 45 | 43 | 20 | male | blue
2 | 49 | 50 | 19 | female | blue
3 | 40 | 61 | 22 | male | brown
4 | 48 | 44 | 20 | female | brown
5 | 44 | 45 | 27 | male | blue
6 | 70 | 20 | 22 | female | blue
7 | 90 | 85 | 22 | male | brown
8 | 75 | 65 | 20 | female | brown
9 | 80 | 72 | 25 | male | blue
10| 65 | 65 | 22 | female | blue
11 | 80 | 70 | 24 | male | brown
12 | 52 | 75 | 22 | female | brown


## Creating vectors from scratch

1. Create a vector of the participant data called `participant` using the `c()` function.

```{r}
participant <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
participant
```


2. Now, create the `participant` vector again, but this time use the `a:b` function.

```{r}
participant <- 1:12
participant
```

3. Now create the `participant` vector again! But this time use the `seq()` function. 

```{r}
participant <- seq(from = 1, to = 12, by = 1)
participant
```


4. Create a vector of the before drink data called `before` using `c()`.

```{r}
before <- c(45, 49, 40, 48, 44, 70, 90, 75, 80, 65, 80, 52)
before
```


5. Create a vector of the after drink data called `after` using `c()`.

```{r}
after <- c(43, 50, 61, 44, 45, 20, 85, 65, 72, 65, 70, 75)
after
```


6. Create a vector of the age data called `age` using `c()`.

```{r}
age <- c(20, 19, 22, 20, 27, 22, 22, 20, 25, 22, 24, 22)
age
```


7. Create a vector of the sex data called `sex` but don't use `c()`. Instead, use the `rep()` function by looking for a pattern in the data.

```{r}
sex <- rep(c("male", "female"), times = 6)
sex
```


8. Create a vector of the eye color data called `eye.color` but don't use `c()`. Instead, use the `rep()` function by looking for the pattern in the data.

```{r}
eye.color <- rep(c("blue", "brown"), each = 2, times = 3)
eye.color
```


## Combining and changing vectors

9. Create a new vector called `age.months` that shows the participants' age in months instead of years. (Hint: use basic vector arithmetic)

```{r}
age.months <- age * 12
age.months
```


10. Create a new vector called `change` that shows the change in participants' scores from before to after (Hint: use basic vector arithmetic)

```{r}
change <- after - before
change
```


11. Create a new vector called `average` that shows the participants' *average* score across both tests. That is, the first element of `average` should be the average of the first participant's two scores, and the second element should be the average of the second participant's two scores...(Hint: Don't use `mean()`! Use basic vector arithmetic)

```{r}
average <- (before + after) / 2
average
```


12. Oops! It turns out that the watch used to measure time was off. All the before times are 1 second too fast, and all the after times are 1 second too slow. Correct them! Make sure you also update the `change` vector!

```{r}
before <- before + 1
after <- after - 1
change <- after - before

before
after
change
```


## Applying functions to vectors

13. How many elements are in *each* of the original data vectors? (Hint: use `length()`). If the number of elements in each is not the same, you typed something in wrong!

```{r}
length(participant)
length(before)
length(after)
length(age)
length(sex)
length(eye.color)
```


14. What was the standard deviation of ages? Assign the result to a scaler object called `age.sd`.

```{r}
sd(age)

age.sd <- sd(age)
```


15. What is the median age? Assign the result to a scaler object called `age.median`.

```{r}
median(age)

age.median <- median(age)
```


16. How many people were there of each sex? (Hint: use `table()`)

```{r}
table(sex)
```


17. What percent of people had each sex? (Hint: use `table()` then divide by its sum with `sum()`)

```{r}
table(sex) / sum(table(sex))

# OR

table(sex) / length(sex)
```


18. Calculate the mean of the `sex` column. What happens and why?

```{r}
#mean(sex)

# Error because you can't take the mean of a character vector!
```


19. What was the mean `before` time? Assign the result to a scaler object called `before.mean`.

```{r}
mean(before)

before.mean <- mean(before)
```


20. What was the mean `after` time? Assign the result to a scaler object called `after.mean`.

```{r}
mean(after)

after.mean <- mean(after)
```


21. What was the difference in the mean `before` times and the mean `after` times? Calculate this in two ways: once using the `change` vector, and once using the `before.mean` and `after.mean` objects. You should get the same answer for both! (If you don't get the same answer for both, it's probably because you didn't update the `change` vector in Question 12!)

```{r}
mean(change)
after.mean - before.mean
```



# CHECKPOINT!

*If you got this far you are doing just fine! Keep it up!*

## Standardizing (z-scores) vectors

22. Create a vector called `before.z` showing a standardized version of `before`.

```{r}
before.z <- (before - mean(before)) / sd(before)
```


23. Create a vector called `after.z` showing a standardized version of `after`.

```{r}
after.z <- (after - mean(after)) / sd(after)
```


24. What was the largest `before` score? What was its corresponding z-score?

```{r}
max(before)

max(before.z)
```


25. What was the smallest `after` score? What was its corresponding z-score?

```{r}
min(after)

min(after.z)
```


26. What should the mean and standard deviation of `before.z` and `after.z` be? Test your predictions by making the appropriate calculations.
```{r}
# should be 0 and 1

mean(before.z)
sd(before.z)

mean(after.z)
sd(after.z)
```



## Random samples from distributions

```{r echo = FALSE, fig.width = 5, fig.height = 5, eval = FALSE}
# A Histogram of 10,000 samples from a Normal distribution with Mean = 100 and sd = 10
hist(rnorm(10000, mean = 100, sd = 10), 
     main = "N(Mean = 100, SD = 10)", yaxt = "n", 
     xlab = "", col = "wheat2", border = "white", 
     xlim = c(50, 150), ylab = "")

```


You can create random samples of values from a Normal distribution using the `rnorm(n, mean, sd)` function. For example, the following code chunk will save a vector of 50 values from a Normal distribution with mean of 20 and standard deviation of 10

```{r}
# Random sample of 50 values from N(mean = 20, sd = 10)
x <- rnorm(n = 50, mean = 20, sd = 10)
```

27. Create a vector called `samp.10` that contains 10 samples from a Normal distribution with a mean of 100 and a standard deviation of 10.

```{r}
samp.10 <- rnorm(n = 10, mean = 100, sd = 10)
```


28. Create a vector called `samp.100000` that contains 100,000 samples from the same Normal distribution as above (that is, also with a mean of 100 and standard deviation of 10).

```{r}
samp.100000 <- rnorm(n = 100000, mean = 100, sd = 10)
```


29. Before making any calculations, what would you guess the mean and standard deviations of `samp.10` and `samp.100000` are? Which prediction are you more confident in?

```{r}
# means should be 100, sd should be 10.
#  values of samp.100000 should be closer
```


30. Calculate the mean and standard deviations of `samp.10` and `samp.100000` separately. Was your prediction correct?

```{r}
mean(samp.10)
sd(samp.10)

mean(samp.100000)
sd(samp.100000)
```


## The Room with 100 Boxes

Imagine the following. There is a room with 100 boxes. 99 of the 100 boxes each contain 100,000 EUR which you can keep. 1 of the 100 boxes contains a bomb which kills you if you open it.

Here's the question...if you walked into the room with 100 boxes, how many would you want to open?

```{r fig.width = 7, fig.height = 7, echo = FALSE}
# Plot of the Boxes Game

# Plotting space
plot(1, xlim = c(0, 11), ylim = c(0, 11),
     xlab = "", ylab = "", main = "The 100 Boxes Game!", 
     type = "n", xaxt = "n", yaxt = "n")

text(x = 5.5, y = 11, labels = "There are 100 boxes\n99 / 100 contain 10,000 EUR (each) and 1 / 100 contains a bomb! How many will you open?", font = 3, cex = .8)

# Boxes
points(x = rep(1:10, times = 10), y = rep(1:10, each = 10), 
    pch = 22, cex = 4, 
     bg = sample(c(rep("green", 99), "red")))

# Labels
points(x = rep(1:10, times = 10), y = rep(1:10, each = 10), pch = "?")

```


You can easily play the Room with 100 Boxes game using the `sample` function in R.

First, put the number of boxes you want to open as a new scaler object called `i.will.open`:

```{r}
i.will.open <- 5  # How many do you want to open? Change the value from 0 to your number
```

Now run the following code to see what you get!

```{r eval = TRUE}
# Play the Room with 100 Boxes Game!

boxes.result <- sample(x = c(rep(100000, 99), -Inf),  # Sample from the box...
                 size = i.will.open)

# Print what you got!

boxes.result  # Show what's in each box (1 means 10,000 EUR)
sum(boxes.result)  # Your total winnings!
```

You can also represent the boxes game with a custom function in R. Run the following chunk to create the new function `play.boxes.game`:

```{r}
# Run this chunk to create the function
play.boxes.game <- function(i.will.open) {

# Prevents exponent printing  
options("scipen" = 100, "digits" = 4)
  
if(i.will.open == 0) {
  
  print("You didn't open any boxes! You earned nothing but are still alive")}
  
if(i.will.open > 0) {
  
  boxes.result <- sample(x = c(rep(100000, 99), -Inf),
                   size = i.will.open)

if(-Inf %in% boxes.result) {
  
  print(paste("You're dead!!! You opened ", i.will.open, 
              " boxes and got the bomb!!!", sep = ""))}

if((-Inf %in% boxes.result) == FALSE) {
  
  print(paste("Congratulations!!! You opened ", i.will.open, 
              " boxes and earned ", sum(boxes.result), 
              " Euros! Don't you want to play again? :)", sep = ""))}
}
  
}
```

Now play the game just by running the function with the number of boxes you want to open as the main argument! For example...

```{r}
play.boxes.game(5)  # Play with 5 boxes
```



That's it! Now it's time to submit your assignment! Save and email your `wpaXLastFirst.R` file to me at nathaniel.phillips@unibas.ch. Then, go to [https://goo.gl/forms/rheaASgVwAGXesze2](https://goo.gl/forms/rheaASgVwAGXesze2) to complete the WPA submission form.

